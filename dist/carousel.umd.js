(function(n,r){typeof exports=="object"&&typeof module<"u"?r(exports):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis<"u"?globalThis:n||self,r(n.carousel={}))})(this,function(n){"use strict";var A=Object.defineProperty;var b=n=>{throw TypeError(n)};var X=(n,r,a)=>r in n?A(n,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[r]=a;var l=(n,r,a)=>X(n,typeof r!="symbol"?r+"":r,a),D=(n,r,a)=>r.has(n)||b("Cannot "+a);var y=(n,r,a)=>r.has(n)?b("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(n):r.set(n,a);var s=(n,r,a)=>(D(n,r,"access private method"),a);var e,I,m,T,k,L,w,E,C,p,f,d,M,O,S;class r extends HTMLElement{constructor(){super()}connectedCallback(){this.classList.add("slide");const u=document.createElement("style");u.textContent=`
    .slide{
      height: 100%;
      flex: 0 0 auto;
      box-sizing: border-box;
      display: block;
    }
    `,document.head.appendChild(u)}}function a(c){if(typeof c!="object"||c===null)return"invalid value type. Breakpoints should be an object";for(const u in c){if(isNaN(Number(u)))return"Breakpoints should contain keys typeof number";const t=c[u];if(typeof t!="object"||t===null||t.slidesToShow&&typeof t.slidesToShow!="number"||t.slidesToScroll&&typeof t.slidesToScroll!="number")return"invalid value type. Pass an object with keys itemsToShow and itemsToScroll and values typeof number"}return!1}class x extends HTMLElement{constructor(){super();y(this,e);l(this,"observer",null);l(this,"slides");l(this,"initialSlides");l(this,"rendered");l(this,"autoplay");l(this,"wraparound");l(this,"_currentIndex");l(this,"_breakpoints");l(this,"maxIndex");l(this,"slidesToShow");l(this,"slideCount");l(this,"slidesToScroll");l(this,"slideWidth");l(this,"isDragging");l(this,"startX");l(this,"dragOffset");l(this,"interval");this.initialSlides=[],this.rendered=!1,this._breakpoints={},this.autoplay=!1,this.wraparound=!1,this.slides=[],this.interval=null,this.slideWidth=100,this.slideCount=0,this._currentIndex=0,this.maxIndex=0,this.slidesToShow=1,this.slidesToScroll=1,this.isDragging=!1,this.startX=0,this.dragOffset=0}static get observedAttributes(){return["autoplay","wraparound","breakpoints"]}attributeChangedCallback(t,i,o){switch(console.log(`Attribute ${t} changed from ${i} to ${o}`),t){case"autoplay":this.autoplay=parseInt(o,10)||!1,this.startAutoPlay();break;case"wraparound":this.wraparound=o.match(/true|false/)?JSON.parse(o):!1;break}}set breakpoints(t){a(t)||(this._breakpoints=t),this.updateBreakpoints()}get breakpoints(){return this._breakpoints}updateBreakpoints(){s(this,e,k).call(this),s(this,e,m).call(this)}get currentIndex(){return this._currentIndex}set currentIndex(t){this._currentIndex=Math.min(Math.max(t,0),this.maxIndex),s(this,e,M).call(this),s(this,e,O).call(this),console.log(this.currentIndex)}connectedCallback(){s(this,e,I).call(this),this.observeSlides(),s(this,e,m).call(this),s(this,e,E).call(this)}disconnectedCallback(){s(this,e,C).call(this)}render(){var o;this.innerHTML="";const t=document.createElement("div");t.classList.add("carousel");const i=document.createElement("div");i.classList.add("carousel-track","transition"),(o=this.slides)==null||o.forEach(h=>i.appendChild(h)),t.appendChild(i),this.appendChild(t)}observeSlides(){const t=(i,o)=>{var h;(h=this.observer)==null||h.disconnect();for(const g of i)g.type==="childList"&&g.addedNodes.forEach(v=>{v.classList&&v.classList.contains("slide")&&(this.initialSlides.push(v),s(this,e,m).call(this))})};this.observer=new MutationObserver(t),this.observer.observe(this,{childList:!0,subtree:!0})}startAutoPlay(){this.autoplay&&(this.interval=setInterval(()=>this.next(),this.autoplay))}stopAutoPlay(){clearInterval(this.interval)}handleNonInfiniteScroll(t){this.currentIndex+=t,this.maxIndex==this.currentIndex&&this.stopAutoPlay()}prev(){if(!this.wraparound){this.handleNonInfiniteScroll(-this.slidesToScroll);return}this.currentIndex<=1?(this.currentIndex-=this.slidesToScroll,s(this,e,S).call(this,this.currentIndex+this.slideCount)):this.currentIndex-=this.slidesToScroll}next(){if(!this.wraparound){this.handleNonInfiniteScroll(this.slidesToScroll);return}const t=this.slideCount-this.slidesToScroll;this.currentIndex>=t?(this.currentIndex+=this.slidesToScroll,s(this,e,S).call(this,this.currentIndex-this.slideCount)):this.currentIndex+=this.slidesToScroll}jump(t){this.currentIndex=t+Math.floor(this.slidesToShow)}}e=new WeakSet,I=function(){const t=document.createElement("style");t.textContent=`
    carousel-component{
      display: block;
      height: 100%;
      width: 100%;
    }
    .carousel {
      overflow: hidden;
      display: flex;
      height: 100%;
    }
    .carousel-track {
      display: flex;
      align-items: center;
      width: 100%;
      height: 100%;
      user-select: none;
    }
    .transition {
      transition: transform 0.3s ease;
    }
    `,document.head.appendChild(t)},m=function(){console.log("initialising"),s(this,e,T).call(this),this.render(),s(this,e,L).call(this),s(this,e,w).call(this)},T=function(){this.querySelector(".carousel-track")||(this.initialSlides=Array.from(this.children)),console.log(this.initialSlides),this.slideCount=this.initialSlides.length;const i=this.initialSlides.slice(0,Math.floor(this.slidesToShow)).map(h=>h.cloneNode(!0)),o=this.initialSlides.slice(-Math.floor(this.slidesToShow)).map(h=>h.cloneNode(!0));this.slides=this.wraparound?[...o,...this.initialSlides,...i]:this.initialSlides},k=function(){for(let t in this.breakpoints)window.innerWidth>=+t&&(this.slidesToShow=this.breakpoints[+t].slidesToShow||1,this.slidesToScroll=this.breakpoints[+t].slidesToScroll||this.breakpoints[+t].slidesToShow||1)},L=function(){var t;this.slideWidth=100/this.slidesToShow,(t=this.slides)==null||t.forEach(i=>{i.setAttribute("style",`width: ${this.slideWidth}%`)})},w=function(){this.maxIndex=this.wraparound?this.slideCount:Math.max(this.slideCount-this.slidesToShow,0),this.currentIndex=this.wraparound?Math.floor(this.slidesToShow):0},E=function(){this.addEventListener("mousedown",s(this,e,p)),this.addEventListener("touchstart",s(this,e,p),{passive:!0}),this.addEventListener("mousemove",s(this,e,f)),this.addEventListener("touchmove",s(this,e,f),{passive:!0}),this.addEventListener("mouseup",s(this,e,d)),this.addEventListener("mouseleave",s(this,e,d)),this.addEventListener("touchend",s(this,e,d)),window.addEventListener("resize",()=>this.updateBreakpoints()),this.startAutoPlay(),this.addEventListener("mouseenter",()=>this.stopAutoPlay()),this.addEventListener("mouseleave",()=>this.startAutoPlay())},C=function(){this.removeEventListener("mousedown",s(this,e,p)),this.removeEventListener("touchstart",s(this,e,p)),this.removeEventListener("mousemove",s(this,e,f)),this.removeEventListener("touchmove",s(this,e,f)),this.removeEventListener("mouseup",s(this,e,d)),this.removeEventListener("mouseleave",s(this,e,d)),this.removeEventListener("touchend",s(this,e,d))},p=function(t){this.stopAutoPlay(),this.slidesToScroll=1,this.isDragging=!0,this.startX=t instanceof MouseEvent?t.clientX:t.touches[0].clientX,this.dragOffset=0},f=function(t){if(!this.isDragging)return;const i=t instanceof MouseEvent?t.clientX:t.touches[0].clientX;this.dragOffset=i-this.startX,(this.currentIndex>=this.maxIndex&&this.dragOffset<0||this.currentIndex<=0&&this.dragOffset>0)&&(this.dragOffset=0);const o=this.querySelector(".carousel-track");o&&(o.style.transform=`translateX(calc(-${this.currentIndex*this.slideWidth}% + ${this.dragOffset}px))`)},d=function(){if(!this.isDragging)return;this.isDragging=!1;const t=this.slideWidth/3;Math.abs(this.dragOffset)>t&&(this.dragOffset<0?this.next():this.currentIndex>0&&this.prev())},M=function(){let t=this.querySelector(".carousel-track");t.style.transform=`translateX(-${this.currentIndex*this.slideWidth}%)`},O=function(){var t;(t=this.slides)==null||t.forEach((i,o)=>{i instanceof HTMLElement&&(i.classList.remove("prev","current","next","hidden"),o===this.currentIndex?i.classList.add("current"):o===this.currentIndex-1?i.classList.add("prev"):o===this.currentIndex+1&&i.classList.add("next"),(o<this.currentIndex-1||o>this.currentIndex+this.slidesToShow)&&i.classList.add("hidden"))})},S=function(t){let i=this.querySelector(".carousel-track");setTimeout(()=>{i==null||i.classList.remove("transition"),this.currentIndex=t,setTimeout(()=>{i==null||i.classList.add("transition")},50)},300)},customElements.define("carousel-component",x),customElements.define("slide-component",r),n.CarouselComponent=x,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
